Turbo Assembler	 Version 4.1	    12/03/25 17:43:34	    Page 1
sumaCuad.ASM



      1				     ideal
      2				     dosseg
      3	0000			     model small
      4	0000			     stack 256
      5
      6	0100			     dataseg
      7	0000  00			 codsal	db 0
      8	0001  45 73 63 72 69 62	65+	 msg1	db 'Escribe el limite: ', 0
      9	      20 65 6C 20 6C 69	6D+
     10	      69 74 65 3A 20 00
     11	0015  0D 0A 20 3C 3D 20	00	 msg2 db 13, 10, ' <= ', 0
     12	001C  0D 0A 45 6C 20 6D	61+	 msgRes	db 13, 10, 'El maximo N	es: ', 0
     13	      78 69 6D 6F 20 4E	20+
     14	      65 73 3A 20 00
     15	002F  23*(??)			 sresul	db 35 dup(?)
     16
     17	0052  14*(??)			 buffer	db 20 dup(?)
     18	0066  0A*(??)			 temp	db 10 dup(?)
     19	0070  0A*(??)			 temp2	db 10 dup(?)
     20
     21	007A  2B			 mas  db '+'
     22	007B  3D			 igual db '='
     23
     24	007C  ????			 limite	dw ?
     25	007E  0000			 n_val	dw 0
     26
     27	0080			     codeseg
     28					 extrn aputs:proc, agets:proc, aatoi:proc, itoa:proc, astrcat:proc
     29
     30	0000			     inicio:
     31	0000  B8 0000s			 mov ax, @data
     32	0003  8E D8			 mov ds, ax
     33	0005  8E C0			 mov es, ax
     34
     35					 ; pedir limite
     36	0007  BE 0001r			 mov si, offset	msg1
     37	000A  E8 0000e			 call aputs
     38
     39	000D  BF 0052r			 mov di, offset	buffer
     40	0010  B9 0013			 mov cx, 19
     41	0013  E8 0000e			 call agets
     42
     43	0016  BE 0052r			 mov si, offset	buffer
     44	0019  E8 0000e			 call aatoi	     ; convierte a numero en ax
     45
     46					 ; guardar limite
     47	001C  A3 007Cr			 mov [limite], ax
     48
     49					 ; preparar registros para comparar
     50	001F  8B 1E 007Cr		 mov bx, [limite]
     51
     52	0023  33 C0			 xor ax, ax
     53	0025  33 C9			 xor cx,cx
     54	0027  33 D2			 xor dx, dx
     55	0029  33 F6			 xor si, si	 ; si =	suma acumulada baja
     56	002B  33 FF			 xor di, di	 ; di =	suma acumulada alta
     57	002D  C7 06 007Er 0000		 mov [n_val], 0
Turbo Assembler	 Version 4.1	    12/03/25 17:43:34	    Page 2
sumaCuad.ASM



     58
     59					 ; logica de suma de cuadrados
     60	0033			     suma:
     61	0033  FF 06 007Er		 inc [n_val]	     ; n++
     62
     63	0037  A1 007Er			 mov ax, [n_val]
     64	003A  F7 26 007Er		 mul [n_val]	     ; ax = n *	n
     65
     66					 ; Convertir numero a temp
     67	003E  BF 0066r			 mov di, offset	temp
     68	0041  E8 0000e			 call itoa
     69
     70					 ; Concatenar temp a sresul
     71	0044  BF 002Fr			 mov di, offset	sresul
     72	0047  BE 0066r			 mov si, offset	temp
     73	004A  E8 0000e			 call astrcat
     74
     75					  ;Concatenar temp a sresul
     76	004D  BF 002Fr			  mov di, offset sresul
     77	0050  BE 007Ar			  mov si, offset mas
     78	0053  E8 FFAA			  call astrcat2
**Error** sumaCuad.ASM(74) Undefined symbol: ASTRCAT2
     79
     80	0056  03 C8			 add cx, ax	     ; acumular	cuadrado (parte	baja)
     81
     82					 ; comparar acumulado (di:si) contra limite (cx:bx)
     83	0058  3B CB			 cmp cx,bx
     84	005A  77 06			 ja pasado	     ; si acumulado > limite (baja) -> te pasaste
     85	005C  72 D5			 jb suma	     ; si acumulado < limite (baja) -> siguele
     86	005E  74 06			 je salir_ciclo	     ; si es exacto, terminamos
     87
     88	0060  EB D1			 jmp suma	     ; si es menor, siguele
     89
     90	0062			     pasado:
     91	0062  FF 0E 007Er		 dec [n_val]	     ; nos pasamos, regresa al ultimo valido
     92
     93	0066			     salir_ciclo:
     94
     95	0066  A1 007Cr			 mov ax,[limite]
     96					 ; Convertir numero a temp
     97	0069  BF 0066r			 mov di, offset	temp
     98	006C  E8 0000e			 call itoa
     99
    100					  ;Concatenar temp a sresul
    101	006F  BF 002Fr			  mov di, offset sresul
    102	0072  BE 0066r			  mov si, offset temp
    103	0075  E8 0000e			  call astrcat
    104
    105					 ; poner en pantalla el	numero
    106	0078  BE 002Fr			 mov si, offset	sresul
    107	007B  E8 0000e			 call aputs
    108	007E			     salir:
    109	007E  B4 4C			 mov ah, 04Ch
    110	0080  A0 0000r			 mov al, [codsal]
    111	0083  CD 21			 int 21h
    112				     end inicio
Turbo Assembler	 Version 4.1	    12/03/25 17:43:34	    Page 3
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "12/03/25"
??FILENAME			  Text	 "sumaCuad"
??TIME				  Text	 "17:43:34"
??VERSION			  Number 040A
@32BIT				  Text	 0
@CODE				  Text	 _TEXT
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 SUMACUAD
@INTERFACE			  Text	 000H
@MODEL				  Text	 2
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
AATOI				  Near	 _TEXT:---- Extern
AGETS				  Near	 _TEXT:---- Extern
APUTS				  Near	 _TEXT:---- Extern
ASTRCAT				  Near	 _TEXT:---- Extern
BUFFER				  Byte	 DGROUP:0052
CODSAL				  Byte	 DGROUP:0000
IGUAL				  Byte	 DGROUP:007B
INICIO				  Near	 _TEXT:0000
ITOA				  Near	 _TEXT:---- Extern
LIMITE				  Word	 DGROUP:007C
MAS				  Byte	 DGROUP:007A
MSG1				  Byte	 DGROUP:0001
MSG2				  Byte	 DGROUP:0015
MSGRES				  Byte	 DGROUP:001C
N_VAL				  Word	 DGROUP:007E
PASADO				  Near	 _TEXT:0062
SALIR				  Near	 _TEXT:007E
SALIR_CICLO			  Near	 _TEXT:0066
SRESUL				  Byte	 DGROUP:002F
SUMA				  Near	 _TEXT:0033
TEMP				  Byte	 DGROUP:0066
TEMP2				  Byte	 DGROUP:0070

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  STACK				  16  0100 Para	  Stack	  STACK
  _DATA				  16  0080 Word	  Public  DATA
_TEXT				  16  0085 Word	  Public  CODE
Turbo Assembler	 Version 4.1	    12/03/25 17:43:34	    Page 4
Error Summary



**Error** sumaCuad.ASM(74) Undefined symbol: ASTRCAT2
